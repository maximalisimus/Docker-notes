



$ podman run -d -p 8585:8888 --name=searx --restart=always -e IMAGE_PROXY="true" -e BASE_URL="http://192.168.0.120:8585" -e UID=1000 -e GID=1000 docker.io/angristan/searx:latest

$ podman generate kube searx -f ./searx.yaml

$ nano searx.yaml

# Generation of Kubernetes YAML is still under development!
#
# Save the output of this file and use kubectl create -f to import
# it into Kubernetes.
#
# Created with podman-3.0.1
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: "2022-02-22T11:40:14Z"
  labels:
    app: searx
  name: searx
spec:
  containers:
  - command:
    - run.sh
    env:
    - name: PATH
      value: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    - name: TERM
      value: xterm
    - name: container
      value: podman
    - name: BASE_URL
      value: http://192.168.0.120:8585
    - name: IMAGE_PROXY
      value: "true"
    - name: UID
      value: "1000"
    - name: GID
      value: "1000"
    image: docker.io/angristan/searx:latest
    name: searx
    ports:
    - containerPort: 8888
      hostPort: 8585
      protocol: TCP
    resources: {}
    securityContext:
      allowPrivilegeEscalation: true
      capabilities:
        drop:
        - CAP_MKNOD
        - CAP_NET_RAW
        - CAP_AUDIT_WRITE
      privileged: false
      readOnlyRootFilesystem: false
      seLinuxOptions: {}
    workingDir: /
  dnsConfig: {}
status: {}




$ podman generate systemd --restart-policy=always -t 1 --files --name searx_pod

$ nano container-searx_pod-searx.service 

# container-searx_pod-searx.service
# autogenerated by Podman 3.0.1
# Tue Feb 22 14:54:55 MSK 2022

[Unit]
Description=Podman container-searx_pod-searx.service
Documentation=man:podman-generate-systemd(1)
Wants=network.target
After=network-online.target
BindsTo=pod-searx_pod.service
After=pod-searx_pod.service

[Service]
Environment=PODMAN_SYSTEMD_UNIT=%n
Restart=always
TimeoutStopSec=61
ExecStart=/usr/bin/podman start searx_pod-searx
ExecStop=/usr/bin/podman stop -t 1 searx_pod-searx
ExecStopPost=/usr/bin/podman stop -t 1 searx_pod-searx
PIDFile=/run/user/1000/containers/overlay-containers/e20e58ce38044b67f21ec510c536cf7d733746baaf68873bf48e6e8a28ada5c9/userdata/conmon.pid
Type=forking

[Install]
WantedBy=multi-user.target default.target



$ nano pod-searx_pod.service 

# pod-searx_pod.service
# autogenerated by Podman 3.0.1
# Tue Feb 22 14:54:55 MSK 2022

[Unit]
Description=Podman pod-searx_pod.service
Documentation=man:podman-generate-systemd(1)
Wants=network.target
After=network-online.target
Requires=container-searx_pod-searx.service
Before=container-searx_pod-searx.service

[Service]
Environment=PODMAN_SYSTEMD_UNIT=%n
Restart=always
TimeoutStopSec=61
ExecStart=/usr/bin/podman start cc9305b31d83-infra
ExecStop=/usr/bin/podman stop -t 1 cc9305b31d83-infra
ExecStopPost=/usr/bin/podman stop -t 1 cc9305b31d83-infra
PIDFile=/run/user/1000/containers/overlay-containers/0423acdc0851e8d5e6f60c79096ed9a735908294db570c8ab6f07441811c8246/userdata/conmon.pid
Type=forking

[Install]
WantedBy=multi-user.target default.target







