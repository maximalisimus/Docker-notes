

Установка Подмана
Выполните указанные шаги для установки Podman в Debian 10/9:

Обновление системы: Введите данную команду для обновления вашей системы

sudo apt -y update && sudo apt -y upgrade

Установка предварительных требований: Установите все предварительные требования, выполнив команды:

sudo apt -y install \
  gcc \
  make \
  cmake \
  git \
  btrfs-progs \
  golang-go \
  go-md2man \
  iptables \
  libassuan-dev \
  libc6-dev \
  libdevmapper-dev \
  libglib2.0-dev \
  libgpgme-dev \
  libgpg-error-dev \
  libostree-dev \
  libprotobuf-dev \
  libprotobuf-c-dev \
  libseccomp-dev \
  libselinux1-dev \
  libsystemd-dev \
  pkg-config \
  runc \
  uidmap \
  libapparmor-dev
Установка conmon: вам нужно установить последнюю версию conmon в вашей системе. Введите данную команду для установки conmon:

git clone https://github.com/containers/conmon
cd conmon
make
sudo make podman
sudo cp /usr/local/libexec/podman/conmon  /usr/local/bin/
Установка плагинов CNI

git clone https://github.com/containernetworking/plugins.git $GOPATH/src/github.com/containernetworking/plugins
cd $GOPATH/src/github.com/containernetworking/plugins
./build_linux.sh
sudo mkdir -p /usr/libexec/cni
sudo cp bin/* /usr/libexec/cni
Настройка сети CNI:

sudo mkdir -p /etc/cni/net.d
curl -qsSL https://raw.githubusercontent.com/containers/libpod/master/cni/87-podman-bridge.conflist | sudo tee /etc/cni/net.d/99-loopback.conf
Добавить файлы конфигурации: вам нужно вручную добавить файлы конфигурации, набрав этот код:

sudo mkdir -p /etc/containers
sudo curl https://raw.githubusercontent.com/projectatomic/registries/master/registries.fedora -o /etc/containers/registries.conf
sudo curl https://raw.githubusercontent.com/containers/skopeo/master/default-policy.json -o /etc/containers/policy.json

Установка Подмана:

sudo su

echo 'deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/ /' > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
wget -nv https://download.opensuse.org/repositories/devel:kubic:libcontainers:stable/Debian_10/Release.key -O- | apt-key add -

echo 'deb http://deb.debian.org/debian buster-backports main' >> /etc/apt/sources.list
echo 'deb https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/ /' > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list
curl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/Release.key | sudo apt-key add -
exit
sudo apt-get update
sudo apt-get -y -t buster-backports install libseccomp2
sudo apt install podman buildah -y

or

git clone https://github.com/containers/libpod/ $GOPATH/src/github.com/containers/libpod
(personal mirror: https://drive.google.com/file/d/1WlR3S9ANAYX0t8WVEdF_S78m6m_t30lG/view?usp=sharing)
cd $GOPATH/src/github.com/containers/libpod
make
sudo make install

sudo apt install python3-pip

pip3 install podman-compose

FEDORA:

sudo dnf install podman-compose

COCKPIT-PODMAN:

sudo apt install cockpit -y

sudo systemctl enable cockpit
sudo systemctl start cockpit
sudo systemctl enable --now cockpit.socket
sudo systemctl start cockpit.socket

sudo firewall-cmd --add-service=cockpit
sudo firewall-cmd --add-service=cockpit --permanent




$ sudo usermod --add-subuids 10000-75535 USERNAME
$ sudo usermod --add-subgids 10000-75535 USERNAME

$ sudo nano /etc/sysctl.conf

kernel.unprivileged_userns_clone=1

$ sudo sysctl -p

$ sudo loginctl enable-linger USERNAME




Docker Compose.

$ sudo ln -sf /var/run/podman.sock /var/run/docker.sock
$ sudo systemctl enable --now podman.socket
$ systemctl --user enable --now podman.socket


Test Podman

podman help

Запуск и проверка cockpit

sudo systemctl status cockpit

Browser
https://ip:9090
The SSL certificate to self signed is CORRECT.





